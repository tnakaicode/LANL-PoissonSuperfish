# README

<https://123deta.com/document/oy8gn54z-poisson-superfish-manual.html>

- Autmesh
  - Generate optimized meshes according to material and shape
  - 材料と形状に応じて最適化されたメッシュを生成
  - *.am -> *.t35
- Poisson
  - Find the magnetic field. Find vector potential on grid points of mesh generated by Automesh
  - 磁場を求める。Automeshで生成したメッシュの格子点上のベクトルポテンシャルを求める
  - *.t35 -> *.t35(add)
  - There is another calculation method Pandira. You can calculate permanent magnets.
  - 別の計算方法のPandiraがある。永久磁石の計算ができる。
- WSFplot
  - Plot Automesh, Poisson results
  - $A_z$ in rectangular coordinate system, $r A_{\phi}$ in cylindrical coordinate system by default
- SF7
  - Complement the result calculated by Poisson on the route specified by the user
  - Use when plotting the magnetic field on the path with Tablplot
  - Poissonが計算した結果をユーザー指定の経路上で補完する
  - 経路上の磁場をTablplotでプロットする際に使う
  - *.in7
- Tablplot
  - Plot row / column data
  - *.tbl

Document  
| doc          | Des                                                                 |
| :----------- | ------------------------------------------------------------------- |
| SFINTRO.pdf  | Introduction, problem variables, SF.INI settings, technical support |
| SFCODES1.pdf | Autofish, Automesh, Fish, CFish, Poisson, Pandira                   |
| SFCODES2.pdf | Cavity tuning programs XXXfish (CCLfish, DTLfish, etc.)             |
| SFCODES3.pdf | Plotting programs Quikplot, Tablplot, and utility programs          |
| SFPOSTP.pdf  | WSFplot, SFO, SF7, Force                                            |
| SFFILES.pdf  | Descriptions of input and output files                              |
| SFEXMPL1.pdf | Example files for Fish, CFish, and Autofish                         |
| SFEXMPL2.pdf | Example files for Poisson and Pandira                               |
| SFEXMPL3.pdf | Example files for tuning programs                                   |
| SFPHYS1.pdf  | Theory of electrostatics and magnetostatics                         |
| SFPHYS2.pdf  | Properties of static magnetic and electric fields                   |
| SFPHYS3.pdf  | Boundary conditions and symmetries                                  |
| SFPHYS4.pdf  | Numerical methods in Poisson and Pandira                            |
| SFPHYS5.pdf  | RF cavity theory                                                    |

SF.INI  
| Keyword              | Desc                                                                                                                   |
| -------------------- | ---------------------------------------------------------------------------------------------------------------------- |
| AlwaysBrowse         | Always browse for a binary solution file.                                                                              |
| ArcAndLineSteps      | Default number of steps in SF7 for interpolation on lines and arcs.                                                    |
| ArcRadius            | Default arc radius in SF7 for interpolation on arcs.                                                                   |
| ArrowKeyStepSize     | ]Cursor step size in WSFplot as a percentage of the screen width.                                                      |
| ArrowLineWidth       | Width in pixels of field arrows on WSFplot display screen.                                                             |
| AssumedBeta          | Use this Beta in SFO if calculated value is unphysical.                                                                |
| AxisLineWidth        | Width in pixels of boundary axes on plotting code display screens.                                                     |
| BetaDigits           | Utility code Beta, maximum significant digits (3 to 15) for beta.                                                      |
| BetaTolerance        | Amountover 1.0 before SFO warns of unphysical Beta.                                                                    |
| BoundaryAxes         | Include numbered axes at all four edges of the WSFplot display.                                                        |
| BoundaryColor        | Color of boundary segments in WSFplot.BoundaryLineWidthWidth in pixels of region boundaries on WSFplot display screen. |
| BrowsingForFiles     | Force use of the standard open dialog if no filename specified.                                                        |
| CFishCirclePlot      | Create Quikplot file CircleFit.QKP showing fitted resonance circles.                                                   |
| CircleLineWidth      | Width in pixels of field circles on WSFplot display screen.                                                            |
| CombineTitleLines    | Sets whether to use one line or two lines on the WSFplot title.                                                        |
| ComplexFields        | SF7 to write real and imaginary CFish fields.                                                                          |
| ComputeStoredEnergy  | Sets whether Poisson and Pandira calculate stored energy.                                                              |
| ContourLineWidth     | Width in pixels of field contour lines in WSFplot display screen.                                                      |
| ContourMinimum       | Lowest contour value as percent of range in WSFplot.                                                                   |
| ContourMaximum       | Highest contour value as percent of range in WSFplot.                                                                  |
| CreateOutputTextFile | Sets whether WSFplot writes output file OUTWSF.TXT.                                                                    |
| CurveLineWidth       | Width in pixels of curves on plotting code display screens.                                                            |
| CutoffTerm           | Limiting the number of terms in the field interpolator.                                                                |
| DecimalPlaces        | Sets precision of field data in SF7 output file OUTSF7.TXT..                                                           |
| DeleteNoRingFiles    | If true, CCLfish and CDTfish delete no-ring Superfish files.                                                           |

## WSFplot

Output from WSFplot

The HardCopy, Driver menu lists several software drivers for producing hardcopy graphics files or printing directly to a printer using the Windows Print Manager. Select HardCopy, Start (or the “C” key) to create the hardcopy output. WSFplot re-plots the present screen using the active driver. You can set a preference for the hardcopy driver in file SF.INI.
HardCopyの[ドライバー]メニューには、ハードコピーグラフィックファイルを作成したり、Windowsプリントマネージャーを使用してプリンターに直接印刷したりするためのソフトウェアドライバーがいくつかリストされています。 HardCopy、Start（または「C」キー）を選択して、ハードコピー出力を作成します。 WSFplotは、アクティブなドライバーを使用して現在の画面を再プロットします。ファイルSF.INIでハードコピードライバーのプリファレンスを設定できます。

Programs WSFplot, Quikplot, and Tablplot write a preference file containing saved screen settings to be used the next time the program starts. The name and location of the file depends upon the SF.INI variable SaveSettingsTo. The choices are:
プログラムWSFplot、Quikplot、およびTablplotは、プログラムの次回起動時に使用される保存された画面設定を含む設定ファイルを書き込みます。ファイルの名前と場所は、SF.INI変数SaveSettingsToに依存します。選択肢は次のとおりです。

```msgraph-interactive
SaveSettingsTo = Local Directory
SaveSettingsTo = Individual File
SaveSettingsTo = filename
SaveSettingsTo = directory
```

where filename is the name of an actual file (including path) to be created and directory is the name of an existing directory. The default setting is “Local Directory,” which means that the code will save file WSFPRF.TXT, QplotPRF.TXT, or TplotPRF.TXT in the current directory (usually where the input file resides). Another SF.INI variable, UseSavedSettings, determines whether the code attempts to use the settings in the preference file.
filenameは作成される実際のファイル（パスを含む）の名前で、directoryは既存のディレクトリの名前です。デフォルト設定は「ローカルディレクトリ」です。これは、コードがファイルWSFPRF.TXT、QplotPRF.TXT、またはTplotPRF.TXTを現在のディレクトリ（通常は入力ファイルが存在する場所）に保存することを意味します。別のSF.INI変数UseSavedSettingsは、コードが設定ファイルの設定を使用しようとするかどうかを決定します。

## TablPlot

- User-defined heading lines including justification
- Optional scaling of the data upon start up
- Control over both X and Y scales
- Curve labels
- Log or linear scales
- Polynomial fits for interpolation
- Plots of the fit residuals
- Integration of the data or the fitted curve
- Comment lines in the input file
- Control of the marker size and connecting lines
- Option to include every Nth line of a table (Tablplot)
- Algebraic, trigonometric, or log operations on data sets or columns
- Creation of new data columns by algebraic combination of existing data columns
- Creation of new Tablplot input files containing the currently selected arrays
- Several type of hardcopy graphics outpu

```bash
Quikplot filename time
Tablplot filename time
```

Quikplot and Tablplotpreference files

Quikplot and Tablplot each write a preference file containing saved screen settings to be used the next time the program starts.  
The name and location of the file depends upon the SF.INI variable SaveSettingsTo.  
The choices are:

```bash
SaveSettingsTo = Local Directory
SaveSettingsTo = Individual File
SaveSettingsTo = filename
SaveSettingsTo = directory
```

## LANL

| exe                        |
| -------------------------- |
| AUTOFISH.EXE               |
| AUTOMESH.EXE               |
| beta.exe                   |
| CCLCELLS.EXE               |
| CCLFISH.EXE                |
| CDTFISH.EXE                |
| CFISH.EXE                  |
| CONVERTF.EXE               |
| DTLCELLS.EXE               |
| DTLFISH.EXE                |
| ELLCAV.EXE                 |
| ELLFISH.EXE                |
| FISH.EXE                   |
| FORCE.EXE                  |
| FSCALE.EXE                 |
| KILPAT.EXE                 |
| LIST35.EXE                 |
| MDTCELLS.EXE               |
| MDTFISH.EXE                |
| MK_SFINI.EXE               |
| PANDIRA.EXE                |
| POISSON.EXE                |
| Quikplot.exe               |
| RFQFISH.EXE                |
| SCCFISH.EXE                |
| SEGFIELD.EXE               |
| SF.INI                     |
| SF7.EXE                    |
| SF8.EXE                    |
| SFO.EXE                    |
| SFOTABLE.EXE               |
| Tablplot.exe               |
| wsfcolor.exe               |
| WSFPLOT.EXE                |

## SFFILES

For static field problems solved by Poisson or Pandira, postprocessor SF7 creates file rootnamennn.EGN in response to the EGUN command, where rootnameis the name of the Automesh input file and nnn is a sequence number of one or more digits. The default length of the rootnameis 6 characters, but you can instruct SF7 to use more characters (up to the full length of the name) by increasing variable RootNameLengthin the SF7 section of SF.INI.
PoissonまたはPandiraによって解決された静的フィールドの問題の場合、ポストプロセッサーSF7は、EGUNコマンドに応答してファイルrootnamennn.EGNを作成します。ここで、rootnameはAutomesh入力ファイルの名前であり、nnnは1桁以上のシーケンス番号です。ルート名のデフォルトの長さは6文字ですが、SF.INIのSF7セクションの変数RootNameLengthを増やすことで、SF7に（名前の完全な長さまで）より多くの文字を使用するように指示できます。

For example, if you start Automesh with input file PROB.AM, then SF7 will create files PROB1.EGN, PROB2.EGN, etc. Each line of the EGUN data file contains four entries. The first two numbers are integer node numbers on a square-mesh rectangular grid in the X and Y (or R and Z) directions. The last two numbers are the field components Bxand By, (or Brand Bz) for magnetostatic problems, or the components Exand Ey, (or Erand Ez) for electrostatic problems.
たとえば、入力ファイルPROB.AMでAutomeshを起動すると、SF7はファイルPROB1.EGN、PROB2.EGNなどを作成します。EGUNデータファイルの各行には4つのエントリが含まれています。最初の2つの数値は、XとY（またはRとZ）方向の正方形メッシュの長方形グリッド上の整数ノード番号です。最後の2つの数値は、静磁場問題の場合はフィールドコンポーネントBxand By（またはブランドBz）、または静電問題の場合はコンポーネントExand Ey（またはErand Ez）です。

Program EGUN computes trajectories of charged particles in electrostatic and magnetostatic focusing systems including the effects of space charge and self magnetic fields. Starting options include Child’s Law conditions on cathodes of various shapes. Either rectangular orcylindrically symmetric geometry may be used. Magnetic fields may be specified using arbitrary configurations of coils, the output of a magnet program such as Poisson, or an externally calculated array of the axial fields.
プログラムEGUNは、空間電荷および自己磁場の影響を含む、静電および静磁集束システムにおける荷電粒子の軌跡を計算します。開始オプションには、さまざまな形状の陰極の子の法則の条件が含まれます。長方形または円筒対称のジオメトリを使用できます。磁場は、コイルの任意の構成、ポアソンなどの磁石プログラムの出力、または軸方向磁場の外部で計算された配列を使用して指定できます。

The code has approximately 5000 lines of C source code. It is used at more than 100 sites. A 125-page user’s guide, examples, and an on-line help facility are available. This code is maintained by Glen Herrmannsfeldt and W.B. Herrmannsfeldt. It is being distributed, for a fee, by:
コードには、約5000行のCソースコードが含まれています。 100以上のサイトで使用されています。 125ページのユーザーガイド、例、オンラインヘルプ機能を利用できます。このコードはGlen HerrmannsfeldtとW.Bによって管理されています。ヘルマンスフェルト。次の方法で有料で配布されています。

## SFPOSTP

The HardCopy, Driver menu lists several software drivers for producing hardcopy graphics files or printing directly to a printer using the Windows Print Manager. Select HardCopy, Start (or the “C” key) to create the hardcopy output. WSFplot re-plots the present screen using the active driver. You can set a preference for the hardcopy driver in file SF.INI. A check mark (✓) appears next to the currently selected driver. The software drivers have configurable options that you can edit from the HardCopy, Options menu.
HardCopy、Driverメニューには、ハードコピーのグラフィックファイルを作成したり、Windowsプリントマネージャーを使用してプリンターに直接印刷したりするためのソフトウェアドライバーがいくつかリストされています。 HardCopy、Start（または「C」キー）を選択して、ハードコピー出力を作成します。 WSFplotは、アクティブなドライバーを使用して現在の画面を再プロットします。 SF.INIファイルでハードコピードライバーのプリファレンスを設定できます。現在選択されているドライバーの横にチェックマーク（✓）が表示されます。ソフトウェアドライバーには、HardCopyの[オプション]メニューから編集できる構成可能なオプションがあります。

The HardCopy, Options menu also includes the full path and name of the graphics output file (if any). You can choose a different name, if desired, but we recommend that you retain the suggested filename extension. In the case of BMP/PCX/PNG bit-image driver, the filename extension will correspond to one of these three graphic types. If you select a different graphic type in the Options menu, and if you do notalter the default filename in any way, then the code will generate the a new default filename with the proper extension. However, the new name will not immediately appear in the File field. If you close the Options dialog and reopen it, the new filename will appear. If you modify the filename, be sure that the extension corresponds to the correct graphic type. The code does not check the extension if you override the default filename.
HardCopyの[オプション]メニューには、グラフィックス出力ファイル（存在する場合）の完全パスと名前も含まれています。必要に応じて別の名前を選択できますが、提案されたファイル名拡張子を保持することをお勧めします。 BMP / PCX / PNGビットイメージドライバーの場合、ファイル名拡張子はこれら3つのグラフィックタイプのいずれかに対応します。 [オプション]メニューで別のグラフィックタイプを選択し、デフォルトのファイル名を変更しない場合、コードは適切な拡張子を持つ新しいデフォルトのファイル名を生成します。ただし、新しい名前は[ファイル]フィールドにすぐには表示されません。 [オプション]ダイアログを閉じて再度開くと、新しいファイル名が表示されます。ファイル名を変更する場合は、拡張子が正しいグラフィックタイプに対応していることを確認してください。デフォルトのファイル名を上書きした場合、コードは拡張子をチェックしません。

if the active driver is the BMP/PCX/PNG bit-image driver, then WSFplot sets the default image size to match the current screen size. If you resize the window, the image size also changes. If you want a different size image, you can override the settings HardCopy, Options menu and start a hardcopy before re-sizing the image.
アクティブなドライバーがBMP / PCX / PNGビットイメージドライバーの場合、WSFplotはデフォルトのイメージサイズを現在の画面サイズと一致するように設定します。ウィンドウのサイズを変更すると、画像サイズも変更されます。別のサイズの画像が必要な場合は、ハードコピー、オプションメニューの設定を上書きして、画像のサイズを変更する前にハードコピーを開始できます。

Each hardcopy driver’s Options menu includes a setting for the line thickness in tenths of a point. Both this setting and the screen line widths that you select for the variousdisplay items (field contours, field arrows, field circles, segment boundaries, mesh triangles, and axis boundaries) affect the hardcopy line thickness as discussed in section B.1.j.
各ハードコピードライバーの[オプション]メニューには、1/10ポイントでの線の太さの設定が含まれています。この設定と、さまざまな表示項目（フィールドの輪郭線、フィールドの矢印、フィールドの円、セグメントの境界、メッシュの三角形、軸の境界）に対して選択する画面の線幅は、セクションB.1.jで説明するように、ハードコピーの線の太さに影響します。

The following sections describe the graphics export formats supported by WSFplot. Much of the information has been supplied with Winteracterdevelopment package of Interactive Software Services Ltd
次のセクションでは、WSFplotでサポートされているグラフィックエクスポート形式について説明します。情報の多くはInteractive Software Services LtdのWinteracter開発パッケージで提供されています
